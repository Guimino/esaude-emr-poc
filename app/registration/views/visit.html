<div ng-controller="VisitController as vm" class="checkin">
  <div class="row bg-info-border bg-info content-border border-rouded-top"><!--visit header -->

    <div class="col-sm-12">
      <div class="row header-text-lg">
        <div class="col-sm-3 col-md-2">
          <img src="../../images/visit.png" class="img-responsive inline-align" width="24" height="24" alt="visit">
          <b>{{'REGISTRATION_LAST_VISIT' | translate}}:</b>
        </div>
        <div class="col-sm-9 col-md-10">
          {{vm.lastVisitMessage}}
        </div>
      </div>

      <div class="row">
        <div class="col-sm-3 col-md-2">
          <img src="../../images/stsp.png" class="img-responsive inline-align" width="24" height="24" alt="visit">
          <b>{{'COMMON_CONSULTATION' | translate}}:</b>
        </div>
        <div class="col-sm-9 col-md-10">
          {{vm.lastConsultationMessage}}
          <span ng-if="vm.lastConsultation" class="label label-default" ng-class="{'label-warning': !vm.nextConsultation}">
            {{vm.nextConsultationMessage}}
          </span>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-3 col-md-2">
          <img src="../../images/pills.png" class="img-responsive inline-align" width="24" height="24" alt="visit">
          <b>{{'COMMON_PHARMACY' | translate}}:</b>
        </div>
        <div class="col-sm-9 col-md-10">
          {{vm.lastPharmacyMessage}}
          <span ng-if="vm.lastPharmacy" class="label label-default" ng-class="{'label-warning': !vm.nextPharmacy}">
            {{vm.nextPharmacyMessage}}
          </span>
        </div>
      </div>
    </div>
  </div><!--visit header -->

  <div class="row bg-info-border content-border header-text-lg">

    <div class="col-sm-12">

      <div class="pull-left status">
        <div ng-if="vm.lastUnclosedVisit">
          <span class="glyphicon glyphicon-ban-circle"></span>
          <span>
            Has an unterminated visit of {{vm.lastUnclosedVisit.visitType.display}}, started on
            {{vm.lastUnclosedVisit.startDatetime | date:'medium'}}
          </span>
        </div>

        <div ng-if="vm.todayVisit">
          <span class="glyphicon glyphicon-info-sign"></span>
          <span>
            Checked in today to {{vm.todayVisit.visitType.display}} at
            {{vm.todayVisit.startDatetime | date:'medium'}}
          </span>
        </div>

        <div ng-if="!vm.todayVisit && !vm.lastUnclosedVisit">
          <span class="glyphicon glyphicon-warning-sign"></span>
          <span>Not checked in yet Today</span>
        </div>
      </div>


      <div class="pull-right" ng-if="!vm.disableCheckin"><!-- visit header controls -->
        <button type="button" class="btn btn-primary btn-lg" ng-disabled="vm.disableCheckin" ng-click="vm.checkIn()">
          <span class="glyphicon glyphicon-log-in"></span>
          <span class="button-label">{{'COMMON_CHECKIN' | translate}}</span>
        </button>
      </div>

    </div>

  </div>

  <!-- visit header controls -->
</div>
